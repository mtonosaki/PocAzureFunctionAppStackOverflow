using Microsoft.AspNetCore.Http;
using Microsoft.AspNetCore.Mvc;
using Microsoft.Azure.WebJobs;
using Microsoft.Azure.WebJobs.Extensions.Http;
using Microsoft.Extensions.Logging;
using System;
using System.Diagnostics;
using System.Threading.Tasks;

namespace StackOverflowTest1
{
    public struct LargeContent
    {
        public double d0001;
        public double d0002;
        public double d0003;
        public double d0004;
        public double d0005;
        public double d0006;
        public double d0007;
        public double d0008;
        public double d0009;
        public double d0010;
        public double d0011;
        public double d0012;
        public double d0013;
        public double d0014;
        public double d0015;
        public double d0016;
        public double d0017;
        public double d0018;
        public double d0019;
        public double d0020;
        public double d0021;
        public double d0022;
        public double d0023;
        public double d0024;
        public double d0025;
        public double d0026;
        public double d0027;
        public double d0028;
        public double d0029;
        public double d0030;
        public double d0031;
        public double d0032;
        public double d0033;
        public double d0034;
        public double d0035;
        public double d0036;
        public double d0037;
        public double d0038;
        public double d0039;
        public double d0040;
        public double d0041;
        public double d0042;
        public double d0043;
        public double d0044;
        public double d0045;
        public double d0046;
        public double d0047;
        public double d0048;
        public double d0049;
        public double d0050;
        public double d0051;
        public double d0052;
        public double d0053;
        public double d0054;
        public double d0055;
        public double d0056;
        public double d0057;
        public double d0058;
        public double d0059;
        public double d0060;
        public double d0061;
        public double d0062;
        public double d0063;
        public double d0064;
        public double d0065;
        public double d0066;
        public double d0067;
        public double d0068;
        public double d0069;
        public double d0070;
        public double d0071;
        public double d0072;
        public double d0073;
        public double d0074;
        public double d0075;
        public double d0076;
        public double d0077;
        public double d0078;
        public double d0079;
        public double d0080;
        public double d0081;
        public double d0082;
        public double d0083;
        public double d0084;
        public double d0085;
        public double d0086;
        public double d0087;
        public double d0088;
        public double d0089;
        public double d0090;
        public double d0091;
        public double d0092;
        public double d0093;
        public double d0094;
        public double d0095;
        public double d0096;
        public double d0097;
        public double d0098;
        public double d0099;
        public double d0100;
        public double d0101;
        public double d0102;
        public double d0103;
        public double d0104;
        public double d0105;
        public double d0106;
        public double d0107;
        public double d0108;
        public double d0109;
        public double d0110;
        public double d0111;
        public double d0112;
        public double d0113;
        public double d0114;
        public double d0115;
        public double d0116;
        public double d0117;
        public double d0118;
        public double d0119;
        public double d0120;
        public double d0121;
        public double d0122;
        public double d0123;
        public double d0124;
        public double d0125;
        public double d0126;
        public double d0127;
        public double d0128;
        public double d0129;
        public double d0130;
        public double d0131;
        public double d0132;
        public double d0133;
        public double d0134;
        public double d0135;
        public double d0136;
        public double d0137;
        public double d0138;
        public double d0139;
        public double d0140;
        public double d0141;
        public double d0142;
        public double d0143;
        public double d0144;
        public double d0145;
        public double d0146;
        public double d0147;
        public double d0148;
        public double d0149;
        public double d0150;
        public double d0151;
        public double d0152;
        public double d0153;
        public double d0154;
        public double d0155;
        public double d0156;
        public double d0157;
        public double d0158;
        public double d0159;
        public double d0160;
        public double d0161;
        public double d0162;
        public double d0163;
        public double d0164;
        public double d0165;
        public double d0166;
        public double d0167;
        public double d0168;
        public double d0169;
        public double d0170;
        public double d0171;
        public double d0172;
        public double d0173;
        public double d0174;
        public double d0175;
        public double d0176;
        public double d0177;
        public double d0178;
        public double d0179;
        public double d0180;
        public double d0181;
        public double d0182;
        public double d0183;
        public double d0184;
        public double d0185;
        public double d0186;
        public double d0187;
        public double d0188;
        public double d0189;
        public double d0190;
        public double d0191;
        public double d0192;
        public double d0193;
        public double d0194;
        public double d0195;
        public double d0196;
        public double d0197;
        public double d0198;
        public double d0199;
        public double d0200;
        public double d0201;
        public double d0202;
        public double d0203;
        public double d0204;
        public double d0205;
        public double d0206;
        public double d0207;
        public double d0208;
        public double d0209;
        public double d0210;
        public double d0211;
        public double d0212;
        public double d0213;
        public double d0214;
        public double d0215;
        public double d0216;
        public double d0217;
        public double d0218;
        public double d0219;
        public double d0220;
        public double d0221;
        public double d0222;
        public double d0223;
        public double d0224;
        public double d0225;
        public double d0226;
        public double d0227;
        public double d0228;
        public double d0229;
        public double d0230;
        public double d0231;
        public double d0232;
        public double d0233;
        public double d0234;
        public double d0235;
        public double d0236;
        public double d0237;
        public double d0238;
        public double d0239;
        public double d0240;
        public double d0241;
        public double d0242;
        public double d0243;
        public double d0244;
        public double d0245;
        public double d0246;
        public double d0247;
        public double d0248;
        public double d0249;
        public double d0250;
        public double d0251;
        public double d0252;
        public double d0253;
        public double d0254;
        public double d0255;
        public double d0256;
        public double d0257;
        public double d0258;
        public double d0259;
        public double d0260;
        public double d0261;
        public double d0262;
        public double d0263;
        public double d0264;
        public double d0265;
        public double d0266;
        public double d0267;
        public double d0268;
        public double d0269;
        public double d0270;
        public double d0271;
        public double d0272;
        public double d0273;
        public double d0274;
        public double d0275;
        public double d0276;
        public double d0277;
        public double d0278;
        public double d0279;
        public double d0280;
        public double d0281;
        public double d0282;
        public double d0283;
        public double d0284;
        public double d0285;
        public double d0286;
        public double d0287;
        public double d0288;
        public double d0289;
        public double d0290;
        public double d0291;
        public double d0292;
        public double d0293;
        public double d0294;
        public double d0295;
        public double d0296;
        public double d0297;
        public double d0298;
        public double d0299;
        public double d0300;
        public double d0301;
        public double d0302;
        public double d0303;
        public double d0304;
        public double d0305;
        public double d0306;
        public double d0307;
        public double d0308;
        public double d0309;
        public double d0310;
        public double d0311;
        public double d0312;
        public double d0313;
        public double d0314;
        public double d0315;
        public double d0316;
        public double d0317;
        public double d0318;
        public double d0319;
        public double d0320;
        public double d0321;
        public double d0322;
        public double d0323;
        public double d0324;
        public double d0325;
        public double d0326;
        public double d0327;
        public double d0328;
        public double d0329;
        public double d0330;
        public double d0331;
        public double d0332;
        public double d0333;
        public double d0334;
        public double d0335;
        public double d0336;
        public double d0337;
        public double d0338;
        public double d0339;
        public double d0340;
        public double d0341;
        public double d0342;
        public double d0343;
        public double d0344;
        public double d0345;
        public double d0346;
        public double d0347;
        public double d0348;
        public double d0349;
        public double d0350;
        public double d0351;
        public double d0352;
        public double d0353;
        public double d0354;
        public double d0355;
        public double d0356;
        public double d0357;
        public double d0358;
        public double d0359;
        public double d0360;
        public double d0361;
        public double d0362;
        public double d0363;
        public double d0364;
        public double d0365;
        public double d0366;
        public double d0367;
        public double d0368;
        public double d0369;
        public double d0370;
        public double d0371;
        public double d0372;
        public double d0373;
        public double d0374;
        public double d0375;
        public double d0376;
        public double d0377;
        public double d0378;
        public double d0379;
        public double d0380;
        public double d0381;
        public double d0382;
        public double d0383;
        public double d0384;
        public double d0385;
        public double d0386;
        public double d0387;
        public double d0388;
        public double d0389;
        public double d0390;
        public double d0391;
        public double d0392;
        public double d0393;
        public double d0394;
        public double d0395;
        public double d0396;
        public double d0397;
        public double d0398;
        public double d0399;
        public double d0400;
        public double d0401;
        public double d0402;
        public double d0403;
        public double d0404;
        public double d0405;
        public double d0406;
        public double d0407;
        public double d0408;
        public double d0409;
        public double d0410;
        public double d0411;
        public double d0412;
        public double d0413;
        public double d0414;
        public double d0415;
        public double d0416;
        public double d0417;
        public double d0418;
        public double d0419;
        public double d0420;
        public double d0421;
        public double d0422;
        public double d0423;
        public double d0424;
        public double d0425;
        public double d0426;
        public double d0427;
        public double d0428;
        public double d0429;
        public double d0430;
        public double d0431;
        public double d0432;
        public double d0433;
        public double d0434;
        public double d0435;
        public double d0436;
        public double d0437;
        public double d0438;
        public double d0439;
        public double d0440;
        public double d0441;
        public double d0442;
        public double d0443;
        public double d0444;
        public double d0445;
        public double d0446;
        public double d0447;
        public double d0448;
        public double d0449;
        public double d0450;
        public double d0451;
        public double d0452;
        public double d0453;
        public double d0454;
        public double d0455;
        public double d0456;
        public double d0457;
        public double d0458;
        public double d0459;
        public double d0460;
        public double d0461;
        public double d0462;
        public double d0463;
        public double d0464;
        public double d0465;
        public double d0466;
        public double d0467;
        public double d0468;
        public double d0469;
        public double d0470;
        public double d0471;
        public double d0472;
        public double d0473;
        public double d0474;
        public double d0475;
        public double d0476;
        public double d0477;
        public double d0478;
        public double d0479;
        public double d0480;
        public double d0481;
        public double d0482;
        public double d0483;
        public double d0484;
        public double d0485;
        public double d0486;
        public double d0487;
        public double d0488;
        public double d0489;
        public double d0490;
        public double d0491;
        public double d0492;
        public double d0493;
        public double d0494;
        public double d0495;
        public double d0496;
        public double d0497;
        public double d0498;
        public double d0499;
        public double d0500;
        public double d0501;
        public double d0502;
        public double d0503;
        public double d0504;
        public double d0505;
        public double d0506;
        public double d0507;
        public double d0508;
        public double d0509;
        public double d0510;
        public double d0511;
        public double d0512;
        public double d0513;
        public double d0514;
        public double d0515;
        public double d0516;
        public double d0517;
        public double d0518;
        public double d0519;
        public double d0520;
        public double d0521;
        public double d0522;
        public double d0523;
        public double d0524;
        public double d0525;
        public double d0526;
        public double d0527;
        public double d0528;
        public double d0529;
        public double d0530;
        public double d0531;
        public double d0532;
        public double d0533;
        public double d0534;
        public double d0535;
        public double d0536;
        public double d0537;
        public double d0538;
        public double d0539;
        public double d0540;
        public double d0541;
        public double d0542;
        public double d0543;
        public double d0544;
        public double d0545;
        public double d0546;
        public double d0547;
        public double d0548;
        public double d0549;
        public double d0550;
        public double d0551;
        public double d0552;
        public double d0553;
        public double d0554;
        public double d0555;
        public double d0556;
        public double d0557;
        public double d0558;
        public double d0559;
        public double d0560;
        public double d0561;
        public double d0562;
        public double d0563;
        public double d0564;
        public double d0565;
        public double d0566;
        public double d0567;
        public double d0568;
        public double d0569;
        public double d0570;
        public double d0571;
        public double d0572;
        public double d0573;
        public double d0574;
        public double d0575;
        public double d0576;
        public double d0577;
        public double d0578;
        public double d0579;
        public double d0580;
        public double d0581;
        public double d0582;
        public double d0583;
        public double d0584;
        public double d0585;
        public double d0586;
        public double d0587;
        public double d0588;
        public double d0589;
        public double d0590;
        public double d0591;
        public double d0592;
        public double d0593;
        public double d0594;
        public double d0595;
        public double d0596;
        public double d0597;
        public double d0598;
        public double d0599;
        public double d0600;
        public double d0601;
        public double d0602;
        public double d0603;
        public double d0604;
        public double d0605;
        public double d0606;
        public double d0607;
        public double d0608;
        public double d0609;
        public double d0610;
        public double d0611;
        public double d0612;
        public double d0613;
        public double d0614;
        public double d0615;
        public double d0616;
        public double d0617;
        public double d0618;
        public double d0619;
        public double d0620;
        public double d0621;
        public double d0622;
        public double d0623;
        public double d0624;
        public double d0625;
        public double d0626;
        public double d0627;
        public double d0628;
        public double d0629;
        public double d0630;
        public double d0631;
        public double d0632;
        public double d0633;
        public double d0634;
        public double d0635;
        public double d0636;
        public double d0637;
        public double d0638;
        public double d0639;
        public double d0640;
        public double d0641;
        public double d0642;
        public double d0643;
        public double d0644;
        public double d0645;
        public double d0646;
        public double d0647;
        public double d0648;
        public double d0649;
        public double d0650;
        public double d0651;
        public double d0652;
        public double d0653;
        public double d0654;
        public double d0655;
        public double d0656;
        public double d0657;
        public double d0658;
        public double d0659;
        public double d0660;
        public double d0661;
        public double d0662;
        public double d0663;
        public double d0664;
        public double d0665;
        public double d0666;
        public double d0667;
        public double d0668;
        public double d0669;
        public double d0670;
        public double d0671;
        public double d0672;
        public double d0673;
        public double d0674;
        public double d0675;
        public double d0676;
        public double d0677;
        public double d0678;
        public double d0679;
        public double d0680;
        public double d0681;
        public double d0682;
        public double d0683;
        public double d0684;
        public double d0685;
        public double d0686;
        public double d0687;
        public double d0688;
        public double d0689;
        public double d0690;
        public double d0691;
        public double d0692;
        public double d0693;
        public double d0694;
        public double d0695;
        public double d0696;
        public double d0697;
        public double d0698;
        public double d0699;
        public double d0700;
        public double d0701;
        public double d0702;
        public double d0703;
        public double d0704;
        public double d0705;
        public double d0706;
        public double d0707;
        public double d0708;
        public double d0709;
        public double d0710;
        public double d0711;
        public double d0712;
        public double d0713;
        public double d0714;
        public double d0715;
        public double d0716;
        public double d0717;
        public double d0718;
        public double d0719;
        public double d0720;
        public double d0721;
        public double d0722;
        public double d0723;
        public double d0724;
        public double d0725;
        public double d0726;
        public double d0727;
        public double d0728;
        public double d0729;
        public double d0730;
        public double d0731;
        public double d0732;
        public double d0733;
        public double d0734;
        public double d0735;
        public double d0736;
        public double d0737;
        public double d0738;
        public double d0739;
        public double d0740;
        public double d0741;
        public double d0742;
        public double d0743;
        public double d0744;
        public double d0745;
        public double d0746;
        public double d0747;
        public double d0748;
        public double d0749;
        public double d0750;
        public double d0751;
        public double d0752;
        public double d0753;
        public double d0754;
        public double d0755;
        public double d0756;
        public double d0757;
        public double d0758;
        public double d0759;
        public double d0760;
        public double d0761;
        public double d0762;
        public double d0763;
        public double d0764;
        public double d0765;
        public double d0766;
        public double d0767;
        public double d0768;
        public double d0769;
        public double d0770;
        public double d0771;
        public double d0772;
        public double d0773;
        public double d0774;
        public double d0775;
        public double d0776;
        public double d0777;
        public double d0778;
        public double d0779;
        public double d0780;
        public double d0781;
        public double d0782;
        public double d0783;
        public double d0784;
        public double d0785;
        public double d0786;
        public double d0787;
        public double d0788;
        public double d0789;
        public double d0790;
        public double d0791;
        public double d0792;
        public double d0793;
        public double d0794;
        public double d0795;
        public double d0796;
        public double d0797;
        public double d0798;
        public double d0799;
        public double d0800;
        public double d0801;
        public double d0802;
        public double d0803;
        public double d0804;
        public double d0805;
        public double d0806;
        public double d0807;
        public double d0808;
        public double d0809;
        public double d0810;
        public double d0811;
        public double d0812;
        public double d0813;
        public double d0814;
        public double d0815;
        public double d0816;
        public double d0817;
        public double d0818;
        public double d0819;
        public double d0820;
        public double d0821;
        public double d0822;
        public double d0823;
        public double d0824;
        public double d0825;
        public double d0826;
        public double d0827;
        public double d0828;
        public double d0829;
        public double d0830;
        public double d0831;
        public double d0832;
        public double d0833;
        public double d0834;
        public double d0835;
        public double d0836;
        public double d0837;
        public double d0838;
        public double d0839;
        public double d0840;
        public double d0841;
        public double d0842;
        public double d0843;
        public double d0844;
        public double d0845;
        public double d0846;
        public double d0847;
        public double d0848;
        public double d0849;
        public double d0850;
        public double d0851;
        public double d0852;
        public double d0853;
        public double d0854;
        public double d0855;
        public double d0856;
        public double d0857;
        public double d0858;
        public double d0859;
        public double d0860;
        public double d0861;
        public double d0862;
        public double d0863;
        public double d0864;
        public double d0865;
        public double d0866;
        public double d0867;
        public double d0868;
        public double d0869;
        public double d0870;
        public double d0871;
        public double d0872;
        public double d0873;
        public double d0874;
        public double d0875;
        public double d0876;
        public double d0877;
        public double d0878;
        public double d0879;
        public double d0880;
        public double d0881;
        public double d0882;
        public double d0883;
        public double d0884;
        public double d0885;
        public double d0886;
        public double d0887;
        public double d0888;
        public double d0889;
        public double d0890;
        public double d0891;
        public double d0892;
        public double d0893;
        public double d0894;
        public double d0895;
        public double d0896;
        public double d0897;
        public double d0898;
        public double d0899;
        public double d0900;
        public double d0901;
        public double d0902;
        public double d0903;
        public double d0904;
        public double d0905;
        public double d0906;
        public double d0907;
        public double d0908;
        public double d0909;
        public double d0910;
        public double d0911;
        public double d0912;
        public double d0913;
        public double d0914;
        public double d0915;
        public double d0916;
        public double d0917;
        public double d0918;
        public double d0919;
        public double d0920;
        public double d0921;
        public double d0922;
        public double d0923;
        public double d0924;
        public double d0925;
        public double d0926;
        public double d0927;
        public double d0928;
        public double d0929;
        public double d0930;
        public double d0931;
        public double d0932;
        public double d0933;
        public double d0934;
        public double d0935;
        public double d0936;
        public double d0937;
        public double d0938;
        public double d0939;
        public double d0940;
        public double d0941;
        public double d0942;
        public double d0943;
        public double d0944;
        public double d0945;
        public double d0946;
        public double d0947;
        public double d0948;
        public double d0949;
        public double d0950;
        public double d0951;
        public double d0952;
        public double d0953;
        public double d0954;
        public double d0955;
        public double d0956;
        public double d0957;
        public double d0958;
        public double d0959;
        public double d0960;
        public double d0961;
        public double d0962;
        public double d0963;
        public double d0964;
        public double d0965;
        public double d0966;
        public double d0967;
        public double d0968;
        public double d0969;
        public double d0970;
        public double d0971;
        public double d0972;
        public double d0973;
        public double d0974;
        public double d0975;
        public double d0976;
        public double d0977;
        public double d0978;
        public double d0979;
        public double d0980;
        public double d0981;
        public double d0982;
        public double d0983;
        public double d0984;
        public double d0985;
        public double d0986;
        public double d0987;
        public double d0988;
        public double d0989;
        public double d0990;
        public double d0991;
        public double d0992;
        public double d0993;
        public double d0994;
        public double d0995;
        public double d0996;
        public double d0997;
        public double d0998;
        public double d0999;
        public double d1000;
    }

    public static class Function2
    {
        [FunctionName("Function2")]
        public static IActionResult Run(
            [HttpTrigger(AuthorizationLevel.Function, "get", "post", Route = null)] HttpRequest req,
            ILogger log)
        {
            string name = req.Query["name"];
            var cp = Process.GetCurrentProcess();
            log.LogInformation($"ÅöFunction2 STACK OVERFLOW PID = {cp.Id}, PName = {cp.ProcessName}, Machine = {cp.MachineName}Å@ {name}. at {DateTime.UtcNow}");

            WasteStack(new LargeContent(), new LargeContent(), new LargeContent(), new LargeContent(), 0);   // to issue stack overflow

            return name != null
                ? (ActionResult)new OkObjectResult($"Hello, {name}")
                : new BadRequestObjectResult("Please pass a name on the query string or in the request body");
        }

        private static void WasteStack(LargeContent c1, LargeContent c2, LargeContent c3, LargeContent c4, double a)
        {
            WasteStack(new LargeContent(), new LargeContent(), new LargeContent(), new LargeContent(), c1.d0001 + c2.d0002 + c3.d0003 + c4.d0004);
        }
    }
}
